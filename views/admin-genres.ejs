<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>
    <%= (typeof pageTitle !== 'undefined' ? pageTitle
         : (typeof title !== 'undefined' ? title : 'Admin • Genres')) %>
  </title>
  <link rel="stylesheet" href="/public/css/site.css?v=<%= (buildId || Date.now()) %>">
  <link rel="stylesheet" href="/public/css/nav.css?v=<%= (buildId || Date.now()) %>">
  <link rel="stylesheet" href="/public/css/hero.css?v=<%= (buildId || Date.now()) %>">
  <link rel="stylesheet" href="/public/css/carousel.css?v=<%= (buildId || Date.now()) %>">
  <link rel="stylesheet" href="/public/css/footer.css?v=<%= (buildId || Date.now()) %>">
</head>
<body class="admin">

  <main class="container narrow">
    <h1>Admin • Genres</h1>

    <% if (typeof error !== 'undefined' && error) { %>
      <p class="banner error"><%= error %></p>
    <% } %>
    <% if (typeof success !== 'undefined' && success) { %>
      <p class="banner success"><%= success %></p>
    <% } %>

    <div class="grid two">
      <section class="card">
        <h3>Add / Update a shelf</h3>
        <form method="post" action="/admin/genres">
          <label>Slug
            <input type="text" name="slug" placeholder="classics" required />
          </label>
          <label>Name
            <input type="text" name="name" placeholder="Classics" required />
          </label>
          <label>Homepage row (1–8)
            <input type="number" name="homepage_row" min="1" max="8" />
          </label>
          <button class="btn" type="submit">Save</button>
        </form>
      </section>

      <aside class="card">
        <h3>How this works</h3>
        <p>Upsert shelves into <code>book_genres</code>. The homepage uses <code>homepage_row</code> to decide the order of shelves.</p>
      </aside>
    </div>

    <section class="card">
      <h2>Existing shelves</h2>
      <% if (!genres || genres.length === 0) { %>
        <p>No shelves yet.</p>
      <% } else { %>
        <ul class="unstyled">
          <% genres.forEach(g => { %>
            <li>
              <code><%= g.slug %></code> — <strong><%= g.name %></strong>
              <% if (g.homepage_row) { %> (row <%= g.homepage_row %>)<% } %>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </section>
  </main>

  <script src="/public/js/theme.js?v=<%= (buildId || Date.now()) %>"></script>
</body>
</html>
