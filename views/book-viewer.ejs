<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head.ejs', {
    pageTitle: (title ? (title + ' — Book Viewer') : 'Book Viewer'),
    pageDescription: 'Read this item in BookLantern'
  }) %>
  <style>
    html,body{ height:100%; margin:0; background:#0b0f17; }
    #wrap{ display:flex; flex-direction:column; height:100%; }
    .bar{
      display:flex; align-items:center; gap:10px; padding:8px 12px;
      background:#0f1522; color:#dfe7f5; border-bottom:1px solid #1e293b;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .bar a{ color:#cbd9ff; text-decoration:none; }
    .bar a:hover{ text-decoration:underline; }
    #frame{ flex:1 1 auto; width:100%; border:0; background:#000; }
    .fallback{
      color:#c5d3e6; padding:12px; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      border-top:1px solid #1e293b; background:#0f1522;
    }
  </style>
</head>
<body>
  <%- include('./partials/navbar.ejs') %>

  <div id="wrap">
    <div class="bar">
      <a href="javascript:history.back()">← Back</a>
      <div style="flex:1 1 auto; font-weight:600;"><%= title || iaId %></div>
      <a href="https://archive.org/details/<%= iaId %>" target="_blank" rel="noopener">Open on archive.org ↗</a>
    </div>

    <!-- Official IA embed (keeps users on BookLantern) -->
    <iframe
      id="frame"
      src="https://archive.org/details/<%= iaId %>?ui=embed#mode/1up"
      allowfullscreen
      referrerpolicy="no-referrer"
      title="Internet Archive Embed">
    </iframe>

    <div class="fallback">
      If the book does not appear above, this item may be restricted or removed on the Internet Archive.
      You can try the direct page <a href="https://archive.org/details/<%= iaId %>" target="_blank" rel="noopener">here</a>.
    </div>
  </div>
</body>
</html>
