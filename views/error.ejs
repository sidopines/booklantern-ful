<!DOCTYPE html>
<html lang="en">
  <%
    // All guards to keep this page bullet-proof
    const _status = (typeof statusCode !== 'undefined' && statusCode) ? statusCode : 500;
    const _message = (typeof message !== 'undefined' && message) ? message : 'Something went wrong';
    const _title = (typeof pageTitle !== 'undefined' && pageTitle) ? pageTitle : 'Something went wrong';
    const _showStack = (typeof showStack !== 'undefined') ? !!showStack : false;
    const _stack = (typeof stack !== 'undefined' && stack) ? stack : '';
  %>
  <%- include('partials/head', { pageTitle: _title, title: _title }) %>
  <body class="page">
    <%- include('partials/navbar') %>

    <main class="container" style="max-width: 900px;">
      <h1 class="title"><%= _title %></h1>
      <p class="muted"><%= _message %></p>
      <% if (typeof retryUrl !== 'undefined' && retryUrl) { %>
        <p><a href="<%= retryUrl %>" class="btn" style="margin-right:8px;">ğŸ”„ Re-open this book</a> <a href="/read" class="btn">Search</a></p>
      <% } %>
      <p class="muted">Status: <%= _status %></p>

      <% if (_showStack && _stack) { %>
        <pre style="margin-top: 16px; padding: 12px; border-radius: 12px; background: #f6f7fb; overflow: auto;"><%= _stack %></pre>
      <% } %>

      <div style="margin-top: 16px;">
        <a href="/" class="btn">â† Back to Home</a>
      </div>
    </main>

    <%- include('partials/footer') %>
  </body>
</html>
