<!doctype html>
<html lang="en">
<head>
  <%- include('./partials/head', {
    pageTitle: 'The best books are the ones that inspire — BookLantern',
    pageDescription: 'Millions of free books from globally trusted libraries. No ads. Peace forever. Peaceful reading experience.'
  }) %>
  <!-- hero.css adds the hero layout and highlight pills -->
  <link rel="stylesheet" href="/public/css/hero.css?v=<%= buildId %>">
</head>
<body>
  <%- include('./partials/navbar') %>

  <!-- HERO -->
  <header class="bl-hero">
    <div class="bl-hero__wrap">
      <div class="bl-hero__copy">
        <div class="bl-eyebrow">BookLantern</div>
        <h1 class="bl-hero__title">
          The best <span class="bl-highlight">books</span><br>
          are the ones that <span class="bl-highlight">inspire</span>
        </h1>

        <form class="bl-hero__search" action="/search" method="get" role="search" aria-label="Search the catalog">
          <input type="text" name="q" placeholder="Search books, authors…" aria-label="Search books" />
          <button class="btn" type="submit">Search</button>
        </form>

        <ul class="bl-hero__points">
          <li>No ads</li>
          <li>Peace forever</li>
          <li>Peaceful reading experience</li>
        </ul>
      </div>

      <!-- Right side: real covers collage (purely presentational). Click => register -->
      <a class="bl-hero__collage" href="/register" aria-label="Create account">
        <% const collage = (locals && Array.isArray(collageBooks)) ? collageBooks.slice(0,8) : []; %>
        <% collage.forEach(function(b){ %>
          <img
            src="<%= b.cover %>"
            alt="<%= (b.title || 'Book').replace(/"/g,'&quot;') %>"
            loading="eager"
            decoding="async">
        <% }) %>
        <span class="bl-hero__collage-cta">Create account →</span>
      </a>
    </div>
  </header>

  <!-- SHELVES -->
  <main class="container shelves">

    <!-- Trending -->
    <section class="shelf">
      <div class="shelf__head">
        <h2>Trending now</h2>
        <a class="shelf__see" href="/search?q=trending">Browse all</a>
      </div>
      <div class="carousel" role="list">
        <% (Array.isArray(trending) ? trending : []).forEach(function(b){ %>
          <%- include('./partials/bookCard', { b }) %>
        <% }) %>
      </div>
    </section>

    <!-- Philosophy -->
    <section class="shelf">
      <div class="shelf__head">
        <h2>Philosophy Picks</h2>
        <a class="shelf__see" href="/search?q=subject%3Aphilosophy">See more</a>
      </div>
      <div class="carousel" role="list">
        <% (Array.isArray(philosophy) ? philosophy : []).forEach(function(b){ %>
          <%- include('./partials/bookCard', { b }) %>
        <% }) %>
      </div>
    </section>

    <!-- History -->
    <section class="shelf">
      <div class="shelf__head">
        <h2>History Picks</h2>
        <a class="shelf__see" href="/search?q=subject%3Ahistory">See more</a>
      </div>
      <div class="carousel" role="list">
        <% (Array.isArray(history) ? history : []).forEach(function(b){ %>
          <%- include('./partials/bookCard', { b }) %>
        <% }) %>
      </div>
    </section>

    <!-- Science -->
    <section class="shelf">
      <div class="shelf__head">
        <h2>Science Picks</h2>
        <a class="shelf__see" href="/search?q=subject%3Ascience">See more</a>
      </div>
      <div class="carousel" role="list">
        <% (Array.isArray(science) ? science : []).forEach(function(b){ %>
          <%- include('./partials/bookCard', { b }) %>
        <% }) %>
      </div>
    </section>

    <!-- Soft “learn more” panel (like Everand’s “Still curious?”) -->
    <section class="learnmore card">
      <h3>Still curious?</h3>
      <p>Let’s get to know each other better.</p>
      <a class="btn btn-primary" href="/about">Learn more about BookLantern</a>
    </section>
  </main>

  <%- include('./partials/footer') %>

  <!-- Keep carousels snappy with mouse-wheel and key nudges -->
  <script>
    (function(){
      document.querySelectorAll('.carousel').forEach(function(row){
        row.addEventListener('wheel', function(e){
          if (Math.abs(e.deltaX) < Math.abs(e.deltaY)) {
            row.scrollLeft += e.deltaY;
            e.preventDefault();
          }
        }, { passive:false });
      });
    })();
  </script>
</body>
</html>
