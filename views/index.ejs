<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head', {
      pageTitle: typeof pageTitle !== 'undefined' ? pageTitle : 'BookLantern â€” Read freely'
    }) %>
    <link rel="stylesheet" href="/public/css/hero.css?v=<%= buildId %>">
  </head>
  <body>
    <%- include('partials/navbar') %>

    <!-- HERO -->
    <header class="hero">
      <div class="container">
        <h1>Millions of free books. One clean reader.</h1>
        <p class="muted">From globally trusted libraries like the Internet Archive, Open Library, HathiTrust, and more.</p>
      </div>
    </header>

    <!-- SHELVES (dynamic) -->
    <main class="container shelves">
      <% const LIST = Array.isArray(shelvesList) ? shelvesList : []; %>

      <% if (!LIST.length) { %>
        <section class="shelf">
          <h2>Featured</h2>
          <p class="muted">No shelves configured yet.</p>
        </section>
      <% } %>

      <% LIST.forEach(function(cat){ 
           const items = (shelvesData && shelvesData[cat]) ? shelvesData[cat] : [];
           const nice = cat.charAt(0).toUpperCase() + cat.slice(1);
      %>
        <section class="shelf">
          <div class="shelf-head">
            <h2><%= nice %></h2>
          </div>

          <% if (!items.length) { %>
            <div class="empty muted">No books yet.</div>
          <% } else { %>
            <div class="grid grid-5">
              <% items.forEach(function(b){ %>
                <a class="card book" href="<%= b.source_url %>" target="_blank" rel="noopener">
                  <div class="thumb">
                    <% if (b.cover_image) { %>
                      <img src="<%= b.cover_image %>" alt="<%= b.title %> cover">
                    <% } else { %>
                      <span class="muted">No cover</span>
                    <% } %>
                  </div>
                  <div class="meta">
                    <h3><%= b.title %></h3>
                    <% if (b.author) { %><div class="author"><%= b.author %></div><% } %>
                  </div>
                </a>
              <% }) %>
            </div>
          <% } %>
        </section>
      <% }) %>
    </main>

    <%- include('partials/footer') %>
  </body>
</html>
