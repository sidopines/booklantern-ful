<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/header'); %>
</head>
<body>
  <%- include('partials/navbar'); %>

  <main class="page-wrap" style="max-width:900px;margin:32px auto 72px;">
    <h1 class="page-title">Login</h1>

    <section class="card" style="border:1px solid #eee;border-radius:12px;padding:16px;background:#fff;">
      <p>Use a one-time link we email to you, or continue with Google / Apple.</p>

      <form id="magic-form" class="login-form" onsubmit="return false;" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <input id="email" type="email" placeholder="you@example.com" required
               style="flex:1;min-width:260px;padding:10px;border:1px solid #ddd;border-radius:8px;">
        <button id="sendLink" class="btn">Send sign-in link</button>
        <a class="btn btn-ghost" href="/register">Donâ€™t have an account? Create one</a>
      </form>

      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;">
        <a class="btn" href="/auth/oauth/google">Continue with Google</a>
        <a class="btn" href="/auth/oauth/apple">Continue with Apple</a>
      </div>

      <p style="margin-top:12px;font-size:0.95rem;color:#555;">
        Having trouble? Check your spam folder, or request another link.
      </p>
    </section>
  </main>

  <%- include('partials/footer'); %>

  <script>
    (function () {
      const btn = document.getElementById('sendLink');
      if (!btn) return;
      btn.addEventListener('click', async () => {
        const email = (document.getElementById('email').value || '').trim();
        if (!email) return alert('Enter your email first.');
        // Wire your Supabase client call here if desired.
        alert('If magic-link auth is wired on the client, it will send now.');
      });
    })();
  </script>
</body>
</html>
