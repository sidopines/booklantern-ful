<!doctype html>
<html lang="en">
<head>
  <%- include('./partials/head.ejs', {
    pageTitle: 'Login • BookLantern',
    pageDescription: 'Sign in to BookLantern.'
  }) %>
</head>
<body>
  <%- include('./partials/navbar.ejs') %>

  <main class="container page-pad auth-wrap">
    <a href="/" onclick="if(document.referrer){history.back();return false;}" class="btn btn-secondary" style="margin-bottom:16px;">← Back</a>

    <section class="auth-card card">
      <h1 class="page-title" style="margin-bottom:8px;">Login</h1>
      <p class="page-sub">Welcome back.</p>

      <%
        const msgs = (typeof messages !== 'undefined' && messages) ? messages : {};
        const err = msgs.error || error;
        const ok  = msgs.success || success;
      %>
      <% if (ok) { %><div class="alert success"><%= ok %></div><% } %>
      <% if (err) { %><div class="alert error"><%= err %></div><% } %>

      <form action="/login" method="post" class="form">
        <input type="hidden" name="_csrf" value="<%= (typeof csrfToken !== 'undefined' ? csrfToken : '') %>">

        <label class="field">
          <span>Email</span>
          <input type="email" name="email" placeholder="you@example.com" required>
        </label>

        <label class="field">
          <span>Password</span>
          <input type="password" name="password" placeholder="••••••••" required>
        </label>

        <label class="checkbox">
          <input type="checkbox" name="remember" value="1">
          <span>Remember me</span>
        </label>

        <div class="actions">
          <button class="btn btn-primary" type="submit">Login</button>
          <a class="btn btn-secondary" href="/register">Create account</a>
        </div>
      </form>
    </section>
  </main>

  <%- include('./partials/footer.ejs') %>
</body>
</html>
