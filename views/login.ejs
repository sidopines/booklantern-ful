<%- include('./partials/head', {
  pageTitle: 'Login • BookLantern',
  pageDescription: 'Sign in to your BookLantern account.'
}) %>
<body>
  <%- include('./partials/navbar') %>

  <main class="container" style="min-height:60vh; display:flex; align-items:center; justify-content:center">
    <div class="card" style="width: 420px; background:var(--surface); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px">
      <h2 style="margin:0 0 6px 0; font-weight:800; letter-spacing:-.01em">Welcome back</h2>
      <p class="muted" style="margin:0 0 16px 0">Sign in to continue reading.</p>

      <% const msgs = (typeof messages !== 'undefined' && messages) ? messages : {}; %>
      <% if (msgs.error) { %>
        <div style="background:rgba(255,93,115,.12); border:1px solid rgba(255,93,115,.35); color:#ffd1d8; padding:10px 12px; border-radius:10px; margin-bottom:12px">
          <%= msgs.error %>
        </div>
      <% } %>

      <!-- Adjust action to match your backend:
           - If using auth routes: action="/auth/login"
           - If using shim: action="/login"
      -->
      <form class="stack" style="--gap:10px" method="post" action="/login">
        <input type="hidden" name="_csrf" value="<%= (typeof csrfToken !== 'undefined' ? csrfToken : '') %>">

        <label class="muted" for="email">Email</label>
        <input class="input" id="email" name="email" type="email" required autocomplete="email" placeholder="you@example.com" style="background:var(--surface-2); border-radius:10px">

        <label class="muted" for="password">Password</label>
        <input class="input" id="password" name="password" type="password" required autocomplete="current-password" placeholder="••••••••" style="background:var(--surface-2); border-radius:10px">

        <div style="display:flex;align-items:center;justify-content:space-between;margin-top:6px">
          <label style="display:flex;align-items:center;gap:6px;font-size:14px">
            <input type="checkbox" name="remember" value="1"> Remember me
          </label>
          <a href="/forgot" class="muted" style="font-size:14px">Forgot password?</a>
        </div>

        <div style="display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-top:12px">
          <button class="btn" type="submit">Login</button>
        </div>
      </form>

      <div style="margin-top:12px" class="muted">
        New here? <a href="/register">Create an account</a>
      </div>
    </div>
  </main>

  <%- include('./partials/footer') %>
