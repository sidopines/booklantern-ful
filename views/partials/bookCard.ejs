<li class="card book-card" role="listitem" style="width:220px; max-width:240px;">
  <% const itemUrl = (typeof b.href === 'string' && b.href) ? b.href : (b.readUrl || b.url || '#'); %>
  <% const gatedUrl = (typeof loginGate === 'function') ? loginGate(user, itemUrl) : itemUrl; %>
  <a class="book-card__thumb" href="<%= gatedUrl %>" aria-label="Read <%= b.title %>" style="display:block; text-decoration:none;">
    <!-- Responsive 2:3 box that scales with the card width -->
    <span
      style="
        position:relative;
        display:block;
        width:100%;
        aspect-ratio:2/3;          /* keeps the poster shape at any width */
        border-radius:12px;
        overflow:hidden;
        background:#f3f3f3;
        box-shadow:0 1px 2px rgba(0,0,0,.06) inset;
        line-height:0;
      "
    >
      <img
        src="<%= b.cover_image || b.cover || '/public/img/placeholder-cover.svg' %>"
        alt="Cover of <%= b.title %>"
        loading="lazy"
        style="
          position:absolute;
          inset:0;
          width:100% !important;
          height:100% !important;
          max-width:none !important;
          object-fit:cover !important;
          object-position:center;
          display:block;
        "
      />
    </span>
  </a>

  <div class="book-card__meta" style="margin-top:10px;">
    <h3 class="book-card__title" style="font-size:14px; line-height:1.25; margin:0 0 4px;">
      <a href="<%= gatedUrl %>" style="text-decoration:none; color:inherit;"><%= b.title %></a>
    </h3>
    <% if (b.author) { %>
      <p class="book-card__author" style="margin:0 0 8px; color:#666; font-size:12px;"><%= b.author %></p>
    <% } %>
    <a class="btn btn-sm" href="<%= gatedUrl %>">Read</a>
  </div>
</li>
