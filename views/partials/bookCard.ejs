<!-- views/partials/bookCard.ejs -->
<%
// expects: { b } with fields: id, provider, title, author, cover
const _id = b && (b.id || '');
const _prov = b && (b.provider || '');
const _title = b && (b.title || 'Untitled');
const _author = b && (b.author || 'Unknown');
const _cover = b && (b.cover || '');
const href = (_prov && _id) ? `/read?provider=${encodeURIComponent(_prov)}&id=${encodeURIComponent(_id)}` : '#';
%>

<article class="bl-card">
  <a class="bl-card__link" href="<%= href %>">
    <div class="bl-card__media">
      <% if (_cover) { %>
        <img
          loading="lazy"
          decoding="async"
          src="<%= _cover %>"
          alt="<%= _title %> â€” <%= _author %>"
          class="bl-card__img"
        />
      <% } else { %>
        <div class="bl-card__img bl-card__img--ph"></div>
      <% } %>
    </div>

    <div class="bl-card__body">
      <h4 class="bl-card__title clamp-2"><%= _title %></h4>
      <div class="bl-card__author clamp-1"><%= _author %></div>
    </div>

    <div class="bl-card__cta">
      <span class="btn btn-ghost">Read</span>
    </div>
  </a>
</article>
