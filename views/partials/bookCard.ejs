<%
  const it = item || {};
  const title  = it.title || 'Untitled';
  const author = it.author || it.authors || 'Unknown';
  const raw    = it.cover || it.coverUrl || it.image || '';
  // Force https so mixed-content doesnâ€™t block covers
  const cover  = raw ? String(raw).replace(/^http:/, 'https:') : '';
  const href   = it.href || it.url || '#';
%>

<li class="card book-card" role="listitem">
  <a class="cover-wrap" href="<%= href %>" aria-label="Read <%= title %>">
    <% if (cover) { %>
      <img class="cover" src="<%= cover %>" alt="Cover: <%= title %>">
    <% } else { %>
      <div class="cover ph">
        <span class="ph-initials"><%= (title || 'BL').trim().slice(0,2).toUpperCase() %></span>
      </div>
    <% } %>
  </a>

  <div class="meta">
    <div class="title" title="<%= title %>"><%= title %></div>
    <div class="author"><%= author %></div>
  </div>

  <div class="actions">
    <a class="btn btn-primary" href="<%= href %>">Read</a>
    <button class="btn btn-secondary btn-listen"
            type="button"
            data-title="<%= title %>"
            data-author="<%= (typeof author === 'string' ? author : '') %>">
      Listen
    </button>
  </div>
</li>
