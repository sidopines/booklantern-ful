<%
  const t = item && item.title ? item.title : 'Untitled';
  const a = item && item.author ? item.author : 'Unknown';
  const href = item && item.href ? item.href : `/read?q=${encodeURIComponent(t + ' ' + a)}`;
  const cover = (item && item.cover) ? String(item.cover).replace(/^http:/, 'https:') : '';
%>
<article class="book-card">
  <a class="cover-wrap" href="<%= href %>" target="_blank" aria-label="Read <%= t %>">
    <% if (cover) { %>
      <img src="<%= cover %>" alt="Cover of <%= t %>" loading="lazy" onerror="blCoverFallback(this)">
    <% } else { %>
      <div class="cover ph"><span class="ph-initials"><%= (t||'BL').slice(0,2).toUpperCase() %></span></div>
    <% } %>
  </a>

  <div class="meta">
    <h3 class="title"><a href="<%= href %>" target="_blank"><%= t %></a></h3>
    <p class="author"><%= a %></p>
  </div>

  <div class="actions">
    <a class="btn primary" href="<%= href %>" target="_blank">Read</a>
    <button class="btn secondary btn-listen" data-title="<%= t %>" data-author="<%= a %>">Listen</button>
  </div>
</article>
