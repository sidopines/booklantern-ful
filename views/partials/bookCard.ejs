<%
/* Robust fallbacks so the card always works */
const prov  = b && (b.provider || '');
const pid   = b && (b.provider_id || b.id || '');
const cover = b && (b.cover_image || b.cover || '/public/placeholder-cover.svg');
const title = b && b.title ? b.title : 'Untitled';
const author = b && b.author ? b.author : '';
const href  = `/read?provider=${encodeURIComponent(prov)}&id=${encodeURIComponent(pid)}`;
%>

<a class="card book" href="<%= href %>" role="listitem" aria-label="Read <%= title %>">
  <img class="book__cover" src="<%= cover %>" alt="">
  <div class="book__meta">
    <h3 class="book__title"><%= title %></h3>
    <% if (author) { %><p class="book__author"><%= author %></p><% } %>
    <span class="btn btn--sm">Read</span>
  </div>
</a>
