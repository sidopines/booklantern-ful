<%
  const itemSafe = item || {};
  const title = itemSafe.title || 'Untitled';
  const author = itemSafe.author || itemSafe.authors || '';
  const url = itemSafe.openUrl || itemSafe.url || '#';
  const cover = itemSafe.cover || itemSafe.coverUrl || itemSafe.image || '';
  const initials = (title || '')
    .split(/\s+/).filter(Boolean).slice(0,2).map(s=>s[0].toUpperCase()).join('');
%>
<article class="card book-card">
  <a href="<%= url %>" target="_blank" rel="noopener">
    <div class="cover">
      <% if (cover) { %>
        <img src="<%= cover %>" alt="Cover: <%= title %>">
      <% } else { %>
        <div class="cover-ph"><%= initials || 'BK' %></div>
      <% } %>
    </div>
  </a>
  <div class="meta">
    <div class="title" title="<%= title %>"><%= title %></div>
    <% if (author) { %><div class="author muted"><%= author %></div><% } %>
    <div class="actions">
      <a class="btn" href="<%= url %>" target="_blank" rel="noopener">Read</a>
      <button class="btn secondary listen-btn"
        type="button"
        data-title="<%- title.replace(/"/g,'&quot;') %>"
        data-author="<%- (author||'').toString().replace(/"/g,'&quot;') %>">Listen</button>
    </div>
  </div>
</article>
