<%
  // Guard inputs and avoid TDZ by using new local names
  const list = (typeof items !== 'undefined' && Array.isArray(items) && items.length) ? items : [];
  const sectionClassSafe = (typeof sectionClass !== 'undefined' && sectionClass) ? sectionClass : '';
  const titleSafe = (typeof title !== 'undefined' && title) ? title : 'Books';
%>
<section class="carousel <%= sectionClassSafe %>">
  <div class="carousel-head">
    <h2><%= titleSafe %></h2>
    <div class="carousel-controls">
      <button class="carousel-btn prev" type="button" aria-label="Previous">‹</button>
      <button class="carousel-btn next" type="button" aria-label="Next">›</button>
    </div>
  </div>

  <% if (!list.length) { %>
    <div class="muted">Nothing here yet.</div>
  <% } else { %>
    <div class="carousel-track" role="list" aria-label="<%= titleSafe %>">
      <% list.forEach(function(it){ %>
        <%- include('./bookCard', { item: it }) %>
      <% }) %>
    </div>
  <% } %>
</section>
