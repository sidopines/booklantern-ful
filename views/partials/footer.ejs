<footer class="site-footer">
  <div class="container row" style="justify-content:space-between; align-items:center;">
    <p class="muted" style="margin:0;">Â© <%= new Date().getFullYear() %> BookLantern. Free forever.</p>

    <!-- Theme toggle -->
    <button id="themeToggle" class="btn ghost" type="button" aria-label="Toggle theme" title="Toggle theme">
      <span id="themeIcon" aria-hidden="true">ðŸŒ™</span>
    </button>
  </div>
</footer>

<!-- Scripts -->
<script src="/public/js/theme.js?v=<%= buildId %>" defer></script>
<script src="/public/js/ui.js?v=<%= buildId %>" defer></script>

<script defer>
  // Register service worker (idempotent)
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.getRegistration().then((reg) => {
        const want = '/sw.js';
        if (!reg || (reg && reg.scope && !reg.scope.endsWith('/'))) {
          navigator.serviceWorker.register(want).catch(() => {});
        }
      }).catch(() => {
        navigator.serviceWorker.register('/sw.js').catch(() => {});
      });
    });
  }
</script>
</body>
</html>
