<!-- views/partials/nav.ejs - Floating Navigation -->
<nav class="floating-nav" aria-label="Primary navigation">
  <!-- Floating Action Button -->
  <button class="nav-fab" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-menu">
    <span class="nav-fab-icon">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </span>
  </button>

  <!-- Curved Menu -->
  <div id="nav-menu" class="nav-menu" role="menu">
    <!-- Search Pill -->
    <div class="nav-search">
      <form action="/read" method="GET" role="search">
        <input type="text" name="query" placeholder="Search books..." aria-label="Search books">
        <button type="submit" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
      </form>
    </div>

    <!-- Navigation Links -->
    <div class="nav-links">
      <a href="/" class="nav-link" role="menuitem">
        <span class="nav-icon">üè†</span>
        <span class="nav-text">Home</span>
      </a>
      
      <a href="/read" class="nav-link" role="menuitem">
        <span class="nav-icon">üìö</span>
        <span class="nav-text">Read</span>
      </a>
      
      <a href="/watch" class="nav-link" role="menuitem">
        <span class="nav-icon">üé•</span>
        <span class="nav-text">Watch</span>
      </a>
      
      <a href="/about" class="nav-link" role="menuitem">
        <span class="nav-icon">‚ÑπÔ∏è</span>
        <span class="nav-text">About</span>
      </a>
      
      <a href="/contact" class="nav-link" role="menuitem">
        <span class="nav-icon">üìß</span>
        <span class="nav-text">Contact</span>
      </a>

      <% if (user) { %>
        <a href="/dashboard" class="nav-link" role="menuitem">
          <span class="nav-icon">üë§</span>
          <span class="nav-text">Dashboard</span>
        </a>
        
        <% if (user.isAdmin) { %>
          <a href="/admin" class="nav-link" role="menuitem">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-text">Admin</span>
          </a>
        <% } %>
        
        <a href="/logout" class="nav-link nav-link-logout" role="menuitem">
          <span class="nav-icon">üö™</span>
          <span class="nav-text">Logout</span>
        </a>
      <% } else { %>
        <a href="/login" class="nav-link" role="menuitem">
          <span class="nav-icon">üîë</span>
          <span class="nav-text">Login</span>
        </a>
        
        <a href="/register" class="nav-link nav-link-primary" role="menuitem">
          <span class="nav-icon">‚ú®</span>
          <span class="nav-text">Register</span>
        </a>
      <% } %>
    </div>

    <!-- Theme Toggle -->
    <div class="nav-theme">
      <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
        <span class="theme-icon">üåô</span>
        <span class="theme-text">Theme</span>
      </button>
    </div>
  </div>
</nav>

<style>
/* Floating Navigation Styles */
.floating-nav {
  position: fixed;
  top: var(--space-lg);
  right: var(--space-lg);
  z-index: var(--z-fixed);
}

.nav-fab {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: var(--gradient-primary);
  border: none;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-neon);
  transition: all var(--transition-normal);
  position: relative;
  overflow: hidden;
}

.nav-fab:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-xl), var(--shadow-neon);
}

.nav-fab:active {
  transform: scale(0.95);
}

.nav-fab-icon {
  transition: transform var(--transition-normal);
}

.nav-fab[aria-expanded="true"] .nav-fab-icon {
  transform: rotate(90deg);
}

.nav-menu {
  position: absolute;
  top: 80px;
  right: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-2xl);
  padding: var(--space-lg);
  min-width: 280px;
  box-shadow: var(--glass-shadow);
  transform: scale(0);
  opacity: 0;
  transform-origin: top right;
  transition: all var(--transition-normal);
}

.nav-menu.open {
  transform: scale(1);
  opacity: 1;
}

.nav-search {
  margin-bottom: var(--space-lg);
}

.nav-search form {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.nav-search input {
  flex: 1;
  padding: var(--space-sm) var(--space-md);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-pill);
  background: var(--glass-bg);
  color: var(--text);
  font-size: 0.9rem;
  transition: all var(--transition-normal);
}

.nav-search input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: var(--shadow-neon);
}

.nav-search button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--gradient-primary);
  border: none;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-normal);
}

.nav-search button:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-neon);
}

.nav-links {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  margin-bottom: var(--space-lg);
}

.nav-link {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  border-radius: var(--radius-lg);
  text-decoration: none;
  color: var(--text);
  transition: all var(--transition-normal);
  position: relative;
  overflow: hidden;
}

.nav-link::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left var(--transition-slow);
}

.nav-link:hover::before {
  left: 100%;
}

.nav-link:hover {
  background: var(--glass-bg);
  transform: translateX(4px);
}

.nav-link-primary {
  background: var(--gradient-primary);
  color: white;
}

.nav-link-primary:hover {
  background: var(--gradient-accent);
  transform: translateX(4px) scale(1.02);
}

.nav-link-logout {
  color: var(--accent);
}

.nav-link-logout:hover {
  background: rgba(255, 94, 168, 0.1);
}

.nav-icon {
  font-size: 1.2rem;
  width: 24px;
  text-align: center;
}

.nav-text {
  font-weight: var(--font-weight-medium);
  font-size: 0.95rem;
}

.nav-theme {
  border-top: 1px solid var(--glass-border);
  padding-top: var(--space-md);
}

.theme-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  border-radius: var(--radius-lg);
  background: transparent;
  border: none;
  color: var(--text);
  cursor: pointer;
  transition: all var(--transition-normal);
  width: 100%;
  text-align: left;
}

.theme-toggle:hover {
  background: var(--glass-bg);
  transform: translateX(4px);
}

.theme-icon {
  font-size: 1.2rem;
  width: 24px;
  text-align: center;
}

.theme-text {
  font-weight: var(--font-weight-medium);
  font-size: 0.95rem;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .floating-nav {
    top: var(--space-md);
    right: var(--space-md);
  }
  
  .nav-fab {
    width: 50px;
    height: 50px;
  }
  
  .nav-menu {
    top: 70px;
    right: -10px;
    min-width: 260px;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .nav-fab,
  .nav-link,
  .theme-toggle,
  .nav-search button {
    transition: none;
  }
  
  .nav-fab:hover,
  .nav-link:hover,
  .theme-toggle:hover {
    transform: none;
  }
  
  .nav-fab-icon {
    transition: none;
  }
  
  .nav-fab[aria-expanded="true"] .nav-fab-icon {
    transform: none;
  }
}
</style>
