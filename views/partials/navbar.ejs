<!-- views/partials/navbar.ejs -->
<header class="nav-wrap">
  <div class="container">
    <nav class="navbar" aria-label="Primary">
      <a class="brand" href="/" aria-label="BookLantern home">
        <picture>
          <!-- If you later upload a crisp SVG, browsers will use it -->
          <source srcset="/img/brand.svg" type="image/svg+xml">
          <!-- Fallback to your PNG logo automatically -->
          <img src="/img/brand.png" alt="BookLantern" width="28" height="28" style="vertical-align:middle;margin-right:10px;border-radius:4px">
        </picture>
        <span class="brand-text">BookLantern</span>
      </a>

      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-links">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>

      <ul id="nav-links" class="links">
        <li><a href="/">Home</a></li>
        <li><a href="/read">Read</a></li>
        <li><a href="/watch">Watch</a></li>
        <li class="sep" aria-hidden="true"></li>
        <li><a href="/about">About</a></li>
        <li><a href="/contact">Contact</a></li>

        <% if (user) { %>
          <% if (user.isAdmin) { %>
            <li class="sep" aria-hidden="true"></li>
            <li><a href="/admin">Admin</a></li>
          <% } %>
          <li><a href="/dashboard">Dashboard</a></li>
          <li><a href="/logout" class="btn small alt">Logout</a></li>
        <% } else { %>
          <li class="sep" aria-hidden="true"></li>
          <li><a href="/login" class="btn small alt">Login</a></li>
          <li><a href="/register" class="btn small">Register</a></li>
        <% } %>
      </ul>
    </nav>
  </div>
</header>

<script>
  (function(){
    const btn  = document.querySelector('.nav-toggle');
    const list = document.getElementById('nav-links');
    if (!btn || !list) return;
    btn.addEventListener('click', function(){
      const open = list.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  })();
</script>
