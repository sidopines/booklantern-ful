<%
const title = video.title || 'Untitled Video';
const description = video.description || '';
const thumbnail = video.thumbnail || '';
const url = video.url || video.href || '#';
const gate = loggedIn ? url : `/login?next=${encodeURIComponent(url)}`;
%>
<article class="card hover" role="listitem" style="min-width:200px">
  <div class="book-cover">
    <% if (thumbnail) { %>
      <img class="cover-img" src="<%= thumbnail %>" alt="<%= title %>" loading="lazy" referrerpolicy="no-referrer"
           onerror="this.style.display='none'; this.nextElementSibling?.classList.remove('hidden');">
      <div class="cover-ph hidden">ðŸŽ¥</div>
    <% } else { %>
      <div class="cover-ph">ðŸŽ¥</div>
    <% } %>
  </div>
  <div class="stack" style="--gap:6px">
    <div class="book-title"><%= title %></div>
    <% if (description) { %>
      <div class="book-author"><%= description.slice(0,80) %><%= description.length > 80 ? '...' : '' %></div>
    <% } %>
    <div class="card-ctas">
      <a class="btn" href="<%= gate %>">Watch</a>
    </div>
  </div>
</article>