<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head.ejs', {
    pageTitle: (typeof pageTitle !== 'undefined' ? pageTitle : 'Read • PDF'),
    pageDescription: (typeof pageDescription !== 'undefined' ? pageDescription : 'View document')
  }) %>
  <style>
    :root { --bg:#0b0c0f; --chrome:#111827; --text:#e5e7eb; --muted:#94a3b8; }
    html, body { height:100%; margin:0; background:var(--bg); color:var(--text); }
    header { position:sticky; top:0; z-index:10; background:var(--chrome); color:#fff; display:flex; align-items:center; gap:10px; padding:8px 12px; }
    header .title { font-weight:600; }
    header a { color:#c7d2fe; text-decoration:none; }
    .frame-wrap { position:fixed; top:48px; bottom:0; left:0; right:0; }
    iframe, embed { width:100%; height:100%; border:0; background:#111; }
    .fallback { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; }
    .btn { display:inline-block; padding:.6rem .9rem; border-radius:10px; background:#fff; color:#111; text-decoration:none; font-weight:600; }
  </style>
</head>
<body>
  <header>
    <a href="javascript:history.back()">← Back</a>
    <div class="title"><%= typeof title !== 'undefined' && title ? title : 'Document' %></div>
    <div style="margin-left:auto"></div>
    <a class="btn" href="<%= url %>" target="_blank" rel="noopener">Open original</a>
  </header>

  <div class="frame-wrap">
    <!-- Streamed via our proxy to avoid X-Frame-Options / CORS trouble -->
    <iframe src="/proxy/pdf?u=<%= encodeURIComponent(url) %>#view=FitH" allow="autoplay"></iframe>
    <noscript>
      <div class="fallback">
        <a class="btn" href="/proxy/pdf?u=<%= encodeURIComponent(url) %>">Open PDF</a>
      </div>
    </noscript>
  </div>
</body>
</html>
