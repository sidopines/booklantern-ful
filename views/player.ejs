<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/header'); %>
  <title><%= typeof pageTitle === 'string' ? pageTitle : 'Video • BookLantern' %></title>
  <style>
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    .frameWrap{background:#f1f5f9;border:1px solid #e5e7eb;border-radius:14px;padding:0;overflow:hidden}
    .frame{width:100%;aspect-ratio:16/9;border:0;display:block}
    .muted{color:#6b7280}
  </style>
</head>
<body>
  <%- include('partials/navbar'); %>

  <main class="wrap" style="padding-bottom:64px;">
    <h1 class="page-title"><%= (video && video.title) || 'Video' %></h1>

    <% if (embedUrl) { %>
      <div class="frameWrap">
        <iframe
          class="frame"
          src="<%= embedUrl %>"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
          loading="lazy"
          title="<%= (video && video.title) || 'Video' %>"></iframe>
      </div>
    <% } else { %>
      <p class="muted">Sorry, this video can’t be embedded. Try opening the source link:
        <% if (video && (video.source_url || video.url || video.link)) { %>
          <a href="<%= video.source_url || video.url || video.link %>">open original</a>.
        <% } %>
      </p>
    <% } %>

    <p style="margin-top:14px"><a href="/watch">← Back to Watch</a></p>
  </main>

  <%- include('partials/footer'); %>
</body>
</html>
