<%- include('./partials/head', { 
  pageTitle: 'Read Book - BookLantern', 
  pageDescription: 'Read this book online with BookLanternâ€™s unified reader.' 
}) %>
<body>
  <%- include('./partials/navbar') %>
  <%- include('./partials/backLink') %>

  <main class="reader-container">
    <div class="reader-header">
      <h1 class="reader-title"><%= typeof title !== 'undefined' ? title : 'Book Title' %></h1>
      <div class="reader-actions">
        <button class="btn secondary" id="bookmarkBtn">ğŸ”– Bookmark</button>
        <button class="btn secondary" id="notesBtn">ğŸ“ Notes</button>
        <button class="btn secondary" id="listenBtn"
          data-provider="<%= provider %>" 
          data-id="<%= id %>">ğŸ”Š Listen</button>
      </div>
    </div>

    <section id="readerArea" class="reader-area">
      <!-- Book content will be injected dynamically via JS -->
      <div class="loading">Loading bookâ€¦</div>
    </section>

    <aside id="notesPanel" class="notes-panel hidden">
      <h2>Your Notes</h2>
      <textarea id="notesInput" placeholder="Write your notes hereâ€¦"></textarea>
      <button id="saveNoteBtn" class="btn">Save Note</button>
      <ul id="notesList"></ul>
    </aside>
  </main>

  <%- include('./partials/footer') %>
  <script>
    window.readerConfig = {
      provider: "<%= provider %>",
      id: "<%= id %>"
    };
  </script>
  <script src="/public/js/ui.js?v=<%= buildId %>" defer></script>
</body>
</html>
