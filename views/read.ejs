<%
const loggedIn = (typeof user !== 'undefined' && user) ? true : false;
const query = (typeof q !== 'undefined' && q) ? q : '';
const books = (typeof results !== 'undefined' && results) ? results : [];
%>
<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
</head>
<body>
  <%- include('./partials/navbar') %>
  
  <div class="container" style="padding-top:16px">
    <%- include('./partials/backLink') %>
  </div>

  <section class="hero">
    <div class="container stack" style="--gap:16px">
      <% if (query) { %>
        <h1>Search Results</h1>
        <p class="muted">Found <%= books.length %> books for "<%= query %>"</p>
      <% } else { %>
        <h1>Explore Free Books</h1>
        <p class="muted">Millions of books from globally trusted libraries. One search, one clean reader.</p>
      <% } %>
      <form class="search" action="/read" method="get" role="search">
        <input class="input" type="search" name="q" placeholder="Search millions of booksâ€¦" value="<%= query %>">
        <button class="btn" type="submit">Search</button>
      </form>
    </div>
  </section>

  <main class="container stack" style="--gap:16px">
    <% if (items && items.length) { %>
      <section class="grid cols-4" role="list">
        <% items.forEach(item => { %>
          <%- include('./partials/bookCard', { item }) %>
        <% }) %>
      </section>
    <% } else { %>
      <div class="card" style="max-width:640px;margin:0 auto;text-align:center">Start by searching above.</div>
    <% } %>
  </main>

  <%- include('./partials/footer') %>
</body>
</html>