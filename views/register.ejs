<!doctype html>
<html lang="en">
<head>
  <%- include('./partials/head.ejs', {
    pageTitle: 'Register • BookLantern',
    pageDescription: 'Create your BookLantern account.'
  }) %>
</head>
<body>
  <%- include('./partials/navbar.ejs') %>

  <main class="container page-pad auth-wrap">
    <a href="/" onclick="if(document.referrer){history.back();return false;}" class="btn btn-secondary" style="margin-bottom:16px;">← Back</a>

    <section class="auth-card card">
      <h1 class="page-title" style="margin-bottom:8px;">Create account</h1>
      <p class="page-sub">Join the largest hub of free books.</p>

      <%
        const msgs = (typeof messages !== 'undefined' && messages) ? messages : {};
        const err = msgs.error || error;
        const ok  = msgs.success || success;
      %>
      <% if (ok)  { %><div class="alert success"><%= ok %></div><% } %>
      <% if (err) { %><div class="alert error"><%= err %></div><% } %>

      <form action="/register" method="post" class="form">
        <input type="hidden" name="_csrf" value="<%= (typeof csrfToken !== 'undefined' ? csrfToken : '') %>">

        <label class="field">
          <span>Name</span>
          <input type="text" name="name" placeholder="Your name" required>
        </label>

        <label class="field">
          <span>Email</span>
          <input type="email" name="email" placeholder="you@example.com" required>
        </label>

        <label class="field">
          <span>Password</span>
          <input type="password" name="password" placeholder="Choose a strong password" required minlength="8">
        </label>

        <label class="field">
          <span>Confirm password</span>
          <input type="password" name="confirmPassword" placeholder="Repeat password" required minlength="8">
        </label>

        <div class="actions">
          <button class="btn btn-primary" type="submit">Register</button>
          <a class="btn btn-secondary" href="/login">I already have an account</a>
        </div>
      </form>
    </section>
  </main>

  <%- include('./partials/footer.ejs') %>
</body>
</html>
